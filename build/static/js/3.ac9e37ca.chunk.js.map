{"version":3,"sources":["../node_modules/size-sensor/lib/index.js","../node_modules/size-sensor/lib/sensorPool.js","../node_modules/size-sensor/lib/id.js","../node_modules/size-sensor/lib/sensors/index.js","../node_modules/size-sensor/lib/sensors/object.js","../node_modules/size-sensor/lib/sensors/resizeObserver.js","../node_modules/gantt-for-react/lib/helper.js","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/@babel/runtime/helpers/esm/construct.js","../node_modules/frappe-gantt/src/date_utils.js","../node_modules/frappe-gantt/src/svg_utils.js","../node_modules/frappe-gantt/src/bar.js","../node_modules/frappe-gantt/src/arrow.js","../node_modules/frappe-gantt/src/popup.js","../node_modules/frappe-gantt/src/index.js","../node_modules/@material-ui/core/esm/FormGroup/FormGroup.js","../node_modules/@material-ui/core/esm/FormControlLabel/FormControlLabel.js","../node_modules/gantt-for-react/lib/index.js","../node_modules/size-sensor/lib/debounce.js","../node_modules/size-sensor/lib/constant.js"],"names":["Object","defineProperty","exports","value","ver","clear","bind","_sensorPool","require","element","cb","sensor","getSensor","unbind","removeSensor","obj","_id","__esModule","_sensors","_constant","Sensors","sensorId","getAttribute","SizeSensorId","newId","setAttribute","createSensor","removeAttribute","destroy","id","concat","_object","_resizeObserver","ResizeObserver","_debounce","undefined","listeners","resizeListener","forEach","listener","parentNode","contentDocument","defaultView","removeEventListener","removeChild","getComputedStyle","position","style","document","createElement","onload","addEventListener","SensorStyle","SensorClassName","SensorTabIndex","type","appendChild","data","newSensor","indexOf","push","idx","splice","length","disconnect","s","observe","noop","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","unsupportedIterableToArray","i","F","n","done","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","Parent","args","Class","isNativeReflectConstruct","Reflect","construct","a","apply","instance","Function","setPrototypeOf","prototype","arguments","YEAR","MONTH","DAY","HOUR","MINUTE","SECOND","MILLISECOND","month_names","parse","date","date_separator","time_separator","Date","date_parts","time_parts","parts","split","map","val","parseInt","vals","to_string","with_time","this","get_date_values","padStart","date_string","time_string","format","format_string","values","d","format_map","YYYY","MM","DD","HH","mm","ss","D","MMMM","MMM","str","formatted_values","keys","sort","b","key","includes","replace","diff","date_a","date_b","milliseconds","seconds","hours","minutes","days","months","years","scale","endsWith","Math","floor","today","slice","now","add","qty","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","start_of","scores","should_reset","_scale","clone","get_days_in_month","month","year","targetLength","padString","String","repeat","$","expr","con","querySelector","createSVG","tag","attrs","elem","createElementNS","attr","append_to","innerHTML","animateSVG","svgElement","from","to","animatedSvgElement","dur","begin","animEl","attributeName","animateElement","calcMode","keyTimes","keySplines","cubic_bezier","getAnimationElement","event","createEvent","initEvent","eventName","dispatchEvent","name","ease","linear","on","selector","callback","delegate","off","handler","delegatedTarget","target","closest","call","matches","Bar","gantt","task","set_defaults","prepare","draw","action_completed","prepare_values","prepare_helpers","invalid","height","options","bar_height","x","compute_x","y","compute_y","corner_radius","bar_corner_radius","duration","date_utils","_end","_start","width","column_width","progress_width","progress","group","class","custom_class","bar_group","handle_group","SVGElement","getX","getY","getWidth","getHeight","getEndX","draw_bar","draw_progress_bar","draw_label","draw_resize_handles","$bar","rx","ry","classList","$bar_progress","requestAnimationFrame","update_label_position","bar","$handle_progress","points","get_progress_polygon_points","join","bar_progress","setup_click_event","popup_trigger","trigger_event","unselect_all","toggle","show_popup","bar_being_dragged","subtitle","target_element","title","dependencies","dep","get_bar","reduce","prev","curr","update_attr","update_handle_position","update_progressbar_position","update_arrow_position","changed","compute_start_end_date","new_start_date","new_end_date","Number","new_progress","compute_progress","setTimeout","x_in_units","gantt_start","width_in_units","task_start","view_is","header_height","padding","_index","dx","rem","odx","isNaN","label","getBBox","remove","handle","arrows","update","Arrow","from_task","to_task","calculate_path","start_x","start_y","end_x","end_y","from_is_below_to","curve","arrow_curve","clockwise","curve_y","offset","path","down_1","down_2","left","Popup","parent","custom_html","make","hide","pointer","Error","position_meta","html","clientWidth","HTMLElement","getBoundingClientRect","top","transform","opacity","Gantt","wrapper","tasks","setup_wrapper","setup_options","setup_tasks","change_view_mode","bind_events","svg_element","wrapper_element","$svg","$container","parentElement","popup_wrapper","assign","view_modes","view_mode","date_format","custom_popup_html","start","end","every","deps","trim","filter","random","toString","generate_id","setup_dependencies","dependency_map","t","mode","update_view_scale","setup_dates","render","setup_gantt_dates","setup_date_values","gantt_end","dates","cur_date","bind_grid_click","bind_bar_events","setup_layers","make_grid","make_dates","make_bars","make_arrows","map_arrows_on_bars","set_width","set_scroll_position","layers","layer","make_grid_background","make_grid_rows","make_grid_header","make_grid_ticks","make_grid_highlights","grid_width","grid_height","grid","rows_layer","lines_layer","row_width","row_height","row_y","x1","y1","x2","y2","tick_x","tick_y","tick_height","tick_class","get_dates_to_draw","lower_x","lower_y","lower_text","upper_text","$upper_text","upper_x","upper_y","last_date","get_date_info","date_text","Day_lower","Week_lower","Month_lower","Day_upper","Week_upper","Month_upper","base_pos","x_pos","bars","task_id","dependency","get_task","arrow","Boolean","cur_width","actual_width","parent_element","scroll_pos","get_oldest_starting_date","scrollLeft","hide_popup","is_dragging","x_on_start","is_resizing_left","is_resizing_right","parent_bar_id","bar_wrapper","contains","offsetX","offsetY","ids","get_all_dependent_tasks","ox","oy","owidth","finaldx","get_snap_position","update_bar_position","date_changed","set_action_completed","bind_bar_progress","is_resizing","min_dx","max_dx","$handle","progress_changed","out","to_process","acc","querySelectorAll","el","modes","some","find","popup","show","prev_date","FormGroup","React","props","ref","classes","className","_props$row","row","other","_objectWithoutProperties","_extends","clsx","root","withStyles","display","flexDirection","flexWrap","FormControlLabel","checked","control","disabledProp","disabled","inputRef","_props$labelPlacement","labelPlacement","onChange","muiFormControl","useFormControl","controlProps","capitalize","Typography","component","theme","alignItems","cursor","verticalAlign","WebkitTapHighlightColor","marginLeft","marginRight","labelPlacementStart","labelPlacementTop","labelPlacementBottom","color","palette","text","_createClass","defineProperties","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","_react2","_interopRequireDefault","_frappeGantt2","_sizeSensor","_helper","default","_classCallCheck","_possibleConstructorReturn","self","ReferenceError","ReactGantt","_Component","_ref","_temp","_this","_len","_key","__proto__","getPrototypeOf","ganttRef","subClass","superClass","create","constructor","_inherits","renderFrappeGanttDOM","prevProps","prevState","ganttInst","refresh","viewMode","_this2","_props","onClick","onDateChange","onProgressChange","onViewChange","customPopupHtml","on_click","on_date_change","on_progress_change","on_view_change","_this3","node","Component","module","fn","delay","timer","clearTimeout"],"mappings":"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","file":"static/js/3.ac9e37ca.chunk.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ver = exports.clear = exports.bind = void 0;\n\nvar _sensorPool = require(\"./sensorPool\");\n\n/**\n * Created by hustcc on 18/6/9.[高考时间]\n * Contract: i@hust.cc\n */\n\n/**\n * bind an element with resize callback function\n * @param {*} element\n * @param {*} cb\n */\nvar bind = function bind(element, cb) {\n  var sensor = (0, _sensorPool.getSensor)(element); // listen with callback\n\n  sensor.bind(cb); // return unbind function\n\n  return function () {\n    sensor.unbind(cb);\n  };\n};\n/**\n * clear all the listener and sensor of an element\n * @param element\n */\n\n\nexports.bind = bind;\n\nvar clear = function clear(element) {\n  var sensor = (0, _sensorPool.getSensor)(element);\n  (0, _sensorPool.removeSensor)(sensor);\n};\n\nexports.clear = clear;\nvar ver = \"0.2.7\";\nexports.ver = ver;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.removeSensor = exports.getSensor = void 0;\n\nvar _id = _interopRequireDefault(require(\"./id\"));\n\nvar _sensors = require(\"./sensors\");\n\nvar _constant = require(\"./constant\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/**\n * Created by hustcc on 18/6/9.\n * Contract: i@hust.cc\n */\n\n/**\n * all the sensor objects.\n * sensor pool\n */\nvar Sensors = {};\n/**\n * get one sensor\n * @param element\n * @returns {*}\n */\n\nvar getSensor = function getSensor(element) {\n  var sensorId = element.getAttribute(_constant.SizeSensorId); // 1. if the sensor exists, then use it\n\n  if (sensorId && Sensors[sensorId]) {\n    return Sensors[sensorId];\n  } // 2. not exist, then create one\n\n\n  var newId = (0, _id[\"default\"])();\n  element.setAttribute(_constant.SizeSensorId, newId);\n  var sensor = (0, _sensors.createSensor)(element); // add sensor into pool\n\n  Sensors[newId] = sensor;\n  return sensor;\n};\n/**\n * 移除 sensor\n * @param sensor\n */\n\n\nexports.getSensor = getSensor;\n\nvar removeSensor = function removeSensor(sensor) {\n  var sensorId = sensor.element.getAttribute(_constant.SizeSensorId); // remove attribute\n\n  sensor.element.removeAttribute(_constant.SizeSensorId); // remove event, dom of the sensor used\n\n  sensor.destroy(); // exist, then remove from pool\n\n  if (sensorId && Sensors[sensorId]) {\n    delete Sensors[sensorId];\n  }\n};\n\nexports.removeSensor = removeSensor;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\n/**\n * Created by hustcc on 18/6/9.\n * Contract: i@hust.cc\n */\nvar id = 1;\n/**\n * generate unique id in application\n * @return {string}\n */\n\nvar _default = function _default() {\n  return \"\".concat(id++);\n};\n\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createSensor = void 0;\n\nvar _object = require(\"./object\");\n\nvar _resizeObserver = require(\"./resizeObserver\");\n\n/**\n * Created by hustcc on 18/7/5.\n * Contract: i@hust.cc\n */\n\n/**\n * sensor strategies\n */\n// export const createSensor = createObjectSensor;\nvar createSensor = typeof ResizeObserver !== 'undefined' ? _resizeObserver.createSensor : _object.createSensor;\nexports.createSensor = createSensor;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createSensor = void 0;\n\nvar _debounce = _interopRequireDefault(require(\"../debounce\"));\n\nvar _constant = require(\"../constant\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/**\n * Created by hustcc on 18/6/9.\n * Contract: i@hust.cc\n */\nvar createSensor = function createSensor(element) {\n  var sensor = undefined; // callback\n\n  var listeners = [];\n  /**\n   * create object DOM of sensor\n   * @returns {HTMLObjectElement}\n   */\n\n  var newSensor = function newSensor() {\n    // adjust style\n    if (getComputedStyle(element).position === 'static') {\n      element.style.position = 'relative';\n    }\n\n    var obj = document.createElement('object');\n\n    obj.onload = function () {\n      obj.contentDocument.defaultView.addEventListener('resize', resizeListener); // 直接触发一次 resize\n\n      resizeListener();\n    };\n\n    obj.setAttribute('style', _constant.SensorStyle);\n    obj.setAttribute('class', _constant.SensorClassName);\n    obj.setAttribute('tabindex', _constant.SensorTabIndex);\n    obj.type = 'text/html'; // append into dom\n\n    element.appendChild(obj); // for ie, should set data attribute delay, or will be white screen\n\n    obj.data = 'about:blank';\n    return obj;\n  };\n  /**\n   * trigger listeners\n   */\n\n\n  var resizeListener = (0, _debounce[\"default\"])(function () {\n    // trigger all listener\n    listeners.forEach(function (listener) {\n      listener(element);\n    });\n  });\n  /**\n   * listen with one callback function\n   * @param cb\n   */\n\n  var bind = function bind(cb) {\n    // if not exist sensor, then create one\n    if (!sensor) {\n      sensor = newSensor();\n    }\n\n    if (listeners.indexOf(cb) === -1) {\n      listeners.push(cb);\n    }\n  };\n  /**\n   * destroy all\n   */\n\n\n  var destroy = function destroy() {\n    if (sensor && sensor.parentNode) {\n      if (sensor.contentDocument) {\n        // remote event\n        sensor.contentDocument.defaultView.removeEventListener('resize', resizeListener);\n      } // remove dom\n\n\n      sensor.parentNode.removeChild(sensor); // initial variable\n\n      sensor = undefined;\n      listeners = [];\n    }\n  };\n  /**\n   * cancel listener bind\n   * @param cb\n   */\n\n\n  var unbind = function unbind(cb) {\n    var idx = listeners.indexOf(cb);\n\n    if (idx !== -1) {\n      listeners.splice(idx, 1);\n    } // no listener, and sensor is exist\n    // then destroy the sensor\n\n\n    if (listeners.length === 0 && sensor) {\n      destroy();\n    }\n  };\n\n  return {\n    element: element,\n    bind: bind,\n    destroy: destroy,\n    unbind: unbind\n  };\n};\n\nexports.createSensor = createSensor;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createSensor = void 0;\n\nvar _debounce = _interopRequireDefault(require(\"../debounce\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/**\n * Created by hustcc on 18/7/5.\n * Contract: i@hust.cc\n */\nvar createSensor = function createSensor(element) {\n  var sensor = undefined; // callback\n\n  var listeners = [];\n  /**\n   * trigger listeners\n   */\n\n  var resizeListener = (0, _debounce[\"default\"])(function () {\n    // trigger all\n    listeners.forEach(function (listener) {\n      listener(element);\n    });\n  });\n  /**\n   * create ResizeObserver sensor\n   * @returns\n   */\n\n  var newSensor = function newSensor() {\n    var s = new ResizeObserver(resizeListener); // listen element\n\n    s.observe(element); // trigger once\n\n    resizeListener();\n    return s;\n  };\n  /**\n   * listen with callback\n   * @param cb\n   */\n\n\n  var bind = function bind(cb) {\n    if (!sensor) {\n      sensor = newSensor();\n    }\n\n    if (listeners.indexOf(cb) === -1) {\n      listeners.push(cb);\n    }\n  };\n  /**\n   * destroy\n   */\n\n\n  var destroy = function destroy() {\n    sensor.disconnect();\n    listeners = [];\n    sensor = undefined;\n  };\n  /**\n   * cancel bind\n   * @param cb\n   */\n\n\n  var unbind = function unbind(cb) {\n    var idx = listeners.indexOf(cb);\n\n    if (idx !== -1) {\n      listeners.splice(idx, 1);\n    } // no listener, and sensor is exist\n    // then destroy the sensor\n\n\n    if (listeners.length === 0 && sensor) {\n      destroy();\n    }\n  };\n\n  return {\n    element: element,\n    bind: bind,\n    destroy: destroy,\n    unbind: unbind\n  };\n};\n\nexports.createSensor = createSensor;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar noop = exports.noop = function noop() {};","import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nimport isNativeReflectConstruct from \"@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","const YEAR = 'year';\nconst MONTH = 'month';\nconst DAY = 'day';\nconst HOUR = 'hour';\nconst MINUTE = 'minute';\nconst SECOND = 'second';\nconst MILLISECOND = 'millisecond';\n\nconst month_names = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n];\n\nexport default {\n    parse(date, date_separator = '-', time_separator = ':') {\n        if (date instanceof Date) {\n            return date;\n        }\n        if (typeof date === 'string') {\n            let date_parts, time_parts;\n            const parts = date.split(' ');\n\n            date_parts = parts[0]\n                .split(date_separator)\n                .map(val => parseInt(val, 10));\n            time_parts = parts[1] && parts[1].split(time_separator);\n\n            // month is 0 indexed\n            date_parts[1] = date_parts[1] - 1;\n\n            let vals = date_parts;\n\n            if (time_parts && time_parts.length) {\n                vals = vals.concat(time_parts);\n            }\n\n            return new Date(...vals);\n        }\n    },\n\n    to_string(date, with_time = false) {\n        if (!(date instanceof Date)) {\n            throw new TypeError('Invalid argument type');\n        }\n        const vals = this.get_date_values(date).map((val, i) => {\n            if (i === 1) {\n                // add 1 for month\n                val = val + 1;\n            }\n\n            return padStart(val + '', 2, '0');\n        });\n        const date_string = `${vals[0]}-${vals[1]}-${vals[2]}`;\n        const time_string = `${vals[3]}:${vals[4]}:${vals[5]}`;\n\n        return date_string + (with_time ? ' ' + time_string : '');\n    },\n\n    format(date, format_string = 'YYYY-MM-DD HH:mm:ss') {\n        const values = this.get_date_values(date).map(d => padStart(d, 2, 0));\n        const format_map = {\n            YYYY: values[0],\n            MM: padStart(+values[1] + 1, 2, 0),\n            DD: values[2],\n            HH: values[3],\n            mm: values[4],\n            ss: values[5],\n            D: values[2],\n            MMMM: month_names[+values[1]],\n            MMM: month_names[+values[1]]\n        };\n\n        let str = format_string;\n        const formatted_values = [];\n\n        Object.keys(format_map)\n            .sort((a, b) => b.length - a.length) // big string first\n            .forEach(key => {\n                if (str.includes(key)) {\n                    str = str.replace(key, `$${formatted_values.length}`);\n                    formatted_values.push(format_map[key]);\n                }\n            });\n\n        formatted_values.forEach((value, i) => {\n            str = str.replace(`$${i}`, value);\n        });\n\n        return str;\n    },\n\n    diff(date_a, date_b, scale = DAY) {\n        let milliseconds, seconds, hours, minutes, days, months, years;\n\n        milliseconds = date_a - date_b;\n        seconds = milliseconds / 1000;\n        minutes = seconds / 60;\n        hours = minutes / 60;\n        days = hours / 24;\n        months = days / 30;\n        years = months / 12;\n\n        if (!scale.endsWith('s')) {\n            scale += 's';\n        }\n\n        return Math.floor(\n            {\n                milliseconds,\n                seconds,\n                minutes,\n                hours,\n                days,\n                months,\n                years\n            }[scale]\n        );\n    },\n\n    today() {\n        const vals = this.get_date_values(new Date()).slice(0, 3);\n        return new Date(...vals);\n    },\n\n    now() {\n        return new Date();\n    },\n\n    add(date, qty, scale) {\n        qty = parseInt(qty, 10);\n        const vals = [\n            date.getFullYear() + (scale === YEAR ? qty : 0),\n            date.getMonth() + (scale === MONTH ? qty : 0),\n            date.getDate() + (scale === DAY ? qty : 0),\n            date.getHours() + (scale === HOUR ? qty : 0),\n            date.getMinutes() + (scale === MINUTE ? qty : 0),\n            date.getSeconds() + (scale === SECOND ? qty : 0),\n            date.getMilliseconds() + (scale === MILLISECOND ? qty : 0)\n        ];\n        return new Date(...vals);\n    },\n\n    start_of(date, scale) {\n        const scores = {\n            [YEAR]: 6,\n            [MONTH]: 5,\n            [DAY]: 4,\n            [HOUR]: 3,\n            [MINUTE]: 2,\n            [SECOND]: 1,\n            [MILLISECOND]: 0\n        };\n\n        function should_reset(_scale) {\n            const max_score = scores[scale];\n            return scores[_scale] <= max_score;\n        }\n\n        const vals = [\n            date.getFullYear(),\n            should_reset(YEAR) ? 0 : date.getMonth(),\n            should_reset(MONTH) ? 1 : date.getDate(),\n            should_reset(DAY) ? 0 : date.getHours(),\n            should_reset(HOUR) ? 0 : date.getMinutes(),\n            should_reset(MINUTE) ? 0 : date.getSeconds(),\n            should_reset(SECOND) ? 0 : date.getMilliseconds()\n        ];\n\n        return new Date(...vals);\n    },\n\n    clone(date) {\n        return new Date(...this.get_date_values(date));\n    },\n\n    get_date_values(date) {\n        return [\n            date.getFullYear(),\n            date.getMonth(),\n            date.getDate(),\n            date.getHours(),\n            date.getMinutes(),\n            date.getSeconds(),\n            date.getMilliseconds()\n        ];\n    },\n\n    get_days_in_month(date) {\n        const no_of_days = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n\n        const month = date.getMonth();\n\n        if (month !== 1) {\n            return no_of_days[month];\n        }\n\n        // Feb\n        const year = date.getFullYear();\n        if ((year % 4 == 0 && year % 100 != 0) || year % 400 == 0) {\n            return 29;\n        }\n        return 28;\n    }\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart\nfunction padStart(str, targetLength, padString) {\n    str = str + '';\n    targetLength = targetLength >> 0;\n    padString = String(typeof padString !== 'undefined' ? padString : ' ');\n    if (str.length > targetLength) {\n        return String(str);\n    } else {\n        targetLength = targetLength - str.length;\n        if (targetLength > padString.length) {\n            padString += padString.repeat(targetLength / padString.length);\n        }\n        return padString.slice(0, targetLength) + String(str);\n    }\n}\n","export function $(expr, con) {\n    return typeof expr === 'string'\n        ? (con || document).querySelector(expr)\n        : expr || null;\n}\n\nexport function createSVG(tag, attrs) {\n    const elem = document.createElementNS('http://www.w3.org/2000/svg', tag);\n    for (let attr in attrs) {\n        if (attr === 'append_to') {\n            const parent = attrs.append_to;\n            parent.appendChild(elem);\n        } else if (attr === 'innerHTML') {\n            elem.innerHTML = attrs.innerHTML;\n        } else {\n            elem.setAttribute(attr, attrs[attr]);\n        }\n    }\n    return elem;\n}\n\nexport function animateSVG(svgElement, attr, from, to) {\n    const animatedSvgElement = getAnimationElement(svgElement, attr, from, to);\n\n    if (animatedSvgElement === svgElement) {\n        // triggered 2nd time programmatically\n        // trigger artificial click event\n        const event = document.createEvent('HTMLEvents');\n        event.initEvent('click', true, true);\n        event.eventName = 'click';\n        animatedSvgElement.dispatchEvent(event);\n    }\n}\n\nfunction getAnimationElement(\n    svgElement,\n    attr,\n    from,\n    to,\n    dur = '0.4s',\n    begin = '0.1s'\n) {\n    const animEl = svgElement.querySelector('animate');\n    if (animEl) {\n        $.attr(animEl, {\n            attributeName: attr,\n            from,\n            to,\n            dur,\n            begin: 'click + ' + begin // artificial click\n        });\n        return svgElement;\n    }\n\n    const animateElement = createSVG('animate', {\n        attributeName: attr,\n        from,\n        to,\n        dur,\n        begin,\n        calcMode: 'spline',\n        values: from + ';' + to,\n        keyTimes: '0; 1',\n        keySplines: cubic_bezier('ease-out')\n    });\n    svgElement.appendChild(animateElement);\n\n    return svgElement;\n}\n\nfunction cubic_bezier(name) {\n    return {\n        ease: '.25 .1 .25 1',\n        linear: '0 0 1 1',\n        'ease-in': '.42 0 1 1',\n        'ease-out': '0 0 .58 1',\n        'ease-in-out': '.42 0 .58 1'\n    }[name];\n}\n\n$.on = (element, event, selector, callback) => {\n    if (!callback) {\n        callback = selector;\n        $.bind(element, event, callback);\n    } else {\n        $.delegate(element, event, selector, callback);\n    }\n};\n\n$.off = (element, event, handler) => {\n    element.removeEventListener(event, handler);\n};\n\n$.bind = (element, event, callback) => {\n    event.split(/\\s+/).forEach(function(event) {\n        element.addEventListener(event, callback);\n    });\n};\n\n$.delegate = (element, event, selector, callback) => {\n    element.addEventListener(event, function(e) {\n        const delegatedTarget = e.target.closest(selector);\n        if (delegatedTarget) {\n            e.delegatedTarget = delegatedTarget;\n            callback.call(this, e, delegatedTarget);\n        }\n    });\n};\n\n$.closest = (selector, element) => {\n    if (!element) return null;\n\n    if (element.matches(selector)) {\n        return element;\n    }\n\n    return $.closest(selector, element.parentNode);\n};\n\n$.attr = (element, attr, value) => {\n    if (!value && typeof attr === 'string') {\n        return element.getAttribute(attr);\n    }\n\n    if (typeof attr === 'object') {\n        for (let key in attr) {\n            $.attr(element, key, attr[key]);\n        }\n        return;\n    }\n\n    element.setAttribute(attr, value);\n};\n","import date_utils from './date_utils';\nimport { $, createSVG, animateSVG } from './svg_utils';\n\nexport default class Bar {\n    constructor(gantt, task) {\n        this.set_defaults(gantt, task);\n        this.prepare();\n        this.draw();\n        this.bind();\n    }\n\n    set_defaults(gantt, task) {\n        this.action_completed = false;\n        this.gantt = gantt;\n        this.task = task;\n    }\n\n    prepare() {\n        this.prepare_values();\n        this.prepare_helpers();\n    }\n\n    prepare_values() {\n        this.invalid = this.task.invalid;\n        this.height = this.gantt.options.bar_height;\n        this.x = this.compute_x();\n        this.y = this.compute_y();\n        this.corner_radius = this.gantt.options.bar_corner_radius;\n        this.duration =\n            date_utils.diff(this.task._end, this.task._start, 'hour') /\n            this.gantt.options.step;\n        this.width = this.gantt.options.column_width * this.duration;\n        this.progress_width =\n            this.gantt.options.column_width *\n                this.duration *\n                (this.task.progress / 100) || 0;\n        this.group = createSVG('g', {\n            class: 'bar-wrapper ' + (this.task.custom_class || ''),\n            'data-id': this.task.id\n        });\n        this.bar_group = createSVG('g', {\n            class: 'bar-group',\n            append_to: this.group\n        });\n        this.handle_group = createSVG('g', {\n            class: 'handle-group',\n            append_to: this.group\n        });\n    }\n\n    prepare_helpers() {\n        SVGElement.prototype.getX = function() {\n            return +this.getAttribute('x');\n        };\n        SVGElement.prototype.getY = function() {\n            return +this.getAttribute('y');\n        };\n        SVGElement.prototype.getWidth = function() {\n            return +this.getAttribute('width');\n        };\n        SVGElement.prototype.getHeight = function() {\n            return +this.getAttribute('height');\n        };\n        SVGElement.prototype.getEndX = function() {\n            return this.getX() + this.getWidth();\n        };\n    }\n\n    draw() {\n        this.draw_bar();\n        this.draw_progress_bar();\n        this.draw_label();\n        this.draw_resize_handles();\n    }\n\n    draw_bar() {\n        this.$bar = createSVG('rect', {\n            x: this.x,\n            y: this.y,\n            width: this.width,\n            height: this.height,\n            rx: this.corner_radius,\n            ry: this.corner_radius,\n            class: 'bar',\n            append_to: this.bar_group\n        });\n\n        animateSVG(this.$bar, 'width', 0, this.width);\n\n        if (this.invalid) {\n            this.$bar.classList.add('bar-invalid');\n        }\n    }\n\n    draw_progress_bar() {\n        if (this.invalid) return;\n        this.$bar_progress = createSVG('rect', {\n            x: this.x,\n            y: this.y,\n            width: this.progress_width,\n            height: this.height,\n            rx: this.corner_radius,\n            ry: this.corner_radius,\n            class: 'bar-progress',\n            append_to: this.bar_group\n        });\n\n        animateSVG(this.$bar_progress, 'width', 0, this.progress_width);\n    }\n\n    draw_label() {\n        createSVG('text', {\n            x: this.x + this.width / 2,\n            y: this.y + this.height / 2,\n            innerHTML: this.task.name,\n            class: 'bar-label',\n            append_to: this.bar_group\n        });\n        // labels get BBox in the next tick\n        requestAnimationFrame(() => this.update_label_position());\n    }\n\n    draw_resize_handles() {\n        if (this.invalid) return;\n\n        const bar = this.$bar;\n        const handle_width = 8;\n\n        createSVG('rect', {\n            x: bar.getX() + bar.getWidth() - 9,\n            y: bar.getY() + 1,\n            width: handle_width,\n            height: this.height - 2,\n            rx: this.corner_radius,\n            ry: this.corner_radius,\n            class: 'handle right',\n            append_to: this.handle_group\n        });\n\n        createSVG('rect', {\n            x: bar.getX() + 1,\n            y: bar.getY() + 1,\n            width: handle_width,\n            height: this.height - 2,\n            rx: this.corner_radius,\n            ry: this.corner_radius,\n            class: 'handle left',\n            append_to: this.handle_group\n        });\n\n        if (this.task.progress && this.task.progress < 100) {\n            this.$handle_progress = createSVG('polygon', {\n                points: this.get_progress_polygon_points().join(','),\n                class: 'handle progress',\n                append_to: this.handle_group\n            });\n        }\n    }\n\n    get_progress_polygon_points() {\n        const bar_progress = this.$bar_progress;\n        return [\n            bar_progress.getEndX() - 5,\n            bar_progress.getY() + bar_progress.getHeight(),\n            bar_progress.getEndX() + 5,\n            bar_progress.getY() + bar_progress.getHeight(),\n            bar_progress.getEndX(),\n            bar_progress.getY() + bar_progress.getHeight() - 8.66\n        ];\n    }\n\n    bind() {\n        if (this.invalid) return;\n        this.setup_click_event();\n    }\n\n    setup_click_event() {\n        $.on(this.group, 'focus ' + this.gantt.options.popup_trigger, e => {\n            if (this.action_completed) {\n                // just finished a move action, wait for a few seconds\n                return;\n            }\n\n            if (e.type === 'click') {\n                this.gantt.trigger_event('click', [this.task]);\n            }\n\n            this.gantt.unselect_all();\n            this.group.classList.toggle('active');\n\n            this.show_popup();\n        });\n    }\n\n    show_popup() {\n        if (this.gantt.bar_being_dragged) return;\n\n        const start_date = date_utils.format(this.task._start, 'MMM D');\n        const end_date = date_utils.format(\n            date_utils.add(this.task._end, -1, 'second'),\n            'MMM D'\n        );\n        const subtitle = start_date + ' - ' + end_date;\n\n        this.gantt.show_popup({\n            target_element: this.$bar,\n            title: this.task.name,\n            subtitle: subtitle,\n            task: this.task\n        });\n    }\n\n    update_bar_position({ x = null, width = null }) {\n        const bar = this.$bar;\n        if (x) {\n            // get all x values of parent task\n            const xs = this.task.dependencies.map(dep => {\n                return this.gantt.get_bar(dep).$bar.getX();\n            });\n            // child task must not go before parent\n            const valid_x = xs.reduce((prev, curr) => {\n                return x >= curr;\n            }, x);\n            if (!valid_x) {\n                width = null;\n                return;\n            }\n            this.update_attr(bar, 'x', x);\n        }\n        if (width && width >= this.gantt.options.column_width) {\n            this.update_attr(bar, 'width', width);\n        }\n        this.update_label_position();\n        this.update_handle_position();\n        this.update_progressbar_position();\n        this.update_arrow_position();\n    }\n\n    date_changed() {\n        let changed = false;\n        const { new_start_date, new_end_date } = this.compute_start_end_date();\n\n        if (Number(this.task._start) !== Number(new_start_date)) {\n            changed = true;\n            this.task._start = new_start_date;\n        }\n\n        if (Number(this.task._end) !== Number(new_end_date)) {\n            changed = true;\n            this.task._end = new_end_date;\n        }\n\n        if (!changed) return;\n\n        this.gantt.trigger_event('date_change', [\n            this.task,\n            new_start_date,\n            date_utils.add(new_end_date, -1, 'second')\n        ]);\n    }\n\n    progress_changed() {\n        const new_progress = this.compute_progress();\n        this.task.progress = new_progress;\n        this.gantt.trigger_event('progress_change', [this.task, new_progress]);\n    }\n\n    set_action_completed() {\n        this.action_completed = true;\n        setTimeout(() => (this.action_completed = false), 1000);\n    }\n\n    compute_start_end_date() {\n        const bar = this.$bar;\n        const x_in_units = bar.getX() / this.gantt.options.column_width;\n        const new_start_date = date_utils.add(\n            this.gantt.gantt_start,\n            x_in_units * this.gantt.options.step,\n            'hour'\n        );\n        const width_in_units = bar.getWidth() / this.gantt.options.column_width;\n        const new_end_date = date_utils.add(\n            new_start_date,\n            width_in_units * this.gantt.options.step,\n            'hour'\n        );\n\n        return { new_start_date, new_end_date };\n    }\n\n    compute_progress() {\n        const progress =\n            this.$bar_progress.getWidth() / this.$bar.getWidth() * 100;\n        return parseInt(progress, 10);\n    }\n\n    compute_x() {\n        const { step, column_width } = this.gantt.options;\n        const task_start = this.task._start;\n        const gantt_start = this.gantt.gantt_start;\n\n        const diff = date_utils.diff(task_start, gantt_start, 'hour');\n        let x = diff / step * column_width;\n\n        if (this.gantt.view_is('Month')) {\n            const diff = date_utils.diff(task_start, gantt_start, 'day');\n            x = diff * column_width / 30;\n        }\n        return x;\n    }\n\n    compute_y() {\n        return (\n            this.gantt.options.header_height +\n            this.gantt.options.padding +\n            this.task._index * (this.height + this.gantt.options.padding)\n        );\n    }\n\n    get_snap_position(dx) {\n        let odx = dx,\n            rem,\n            position;\n\n        if (this.gantt.view_is('Week')) {\n            rem = dx % (this.gantt.options.column_width / 7);\n            position =\n                odx -\n                rem +\n                (rem < this.gantt.options.column_width / 14\n                    ? 0\n                    : this.gantt.options.column_width / 7);\n        } else if (this.gantt.view_is('Month')) {\n            rem = dx % (this.gantt.options.column_width / 30);\n            position =\n                odx -\n                rem +\n                (rem < this.gantt.options.column_width / 60\n                    ? 0\n                    : this.gantt.options.column_width / 30);\n        } else {\n            rem = dx % this.gantt.options.column_width;\n            position =\n                odx -\n                rem +\n                (rem < this.gantt.options.column_width / 2\n                    ? 0\n                    : this.gantt.options.column_width);\n        }\n        return position;\n    }\n\n    update_attr(element, attr, value) {\n        value = +value;\n        if (!isNaN(value)) {\n            element.setAttribute(attr, value);\n        }\n        return element;\n    }\n\n    update_progressbar_position() {\n        this.$bar_progress.setAttribute('x', this.$bar.getX());\n        this.$bar_progress.setAttribute(\n            'width',\n            this.$bar.getWidth() * (this.task.progress / 100)\n        );\n    }\n\n    update_label_position() {\n        const bar = this.$bar,\n            label = this.group.querySelector('.bar-label');\n\n        if (label.getBBox().width > bar.getWidth()) {\n            label.classList.add('big');\n            label.setAttribute('x', bar.getX() + bar.getWidth() + 5);\n        } else {\n            label.classList.remove('big');\n            label.setAttribute('x', bar.getX() + bar.getWidth() / 2);\n        }\n    }\n\n    update_handle_position() {\n        const bar = this.$bar;\n        this.handle_group\n            .querySelector('.handle.left')\n            .setAttribute('x', bar.getX() + 1);\n        this.handle_group\n            .querySelector('.handle.right')\n            .setAttribute('x', bar.getEndX() - 9);\n        const handle = this.group.querySelector('.handle.progress');\n        handle &&\n            handle.setAttribute('points', this.get_progress_polygon_points());\n    }\n\n    update_arrow_position() {\n        this.arrows = this.arrows || [];\n        for (let arrow of this.arrows) {\n            arrow.update();\n        }\n    }\n}\n\nfunction isFunction(functionToCheck) {\n    var getType = {};\n    return (\n        functionToCheck &&\n        getType.toString.call(functionToCheck) === '[object Function]'\n    );\n}\n","import { createSVG } from './svg_utils';\n\nexport default class Arrow {\n    constructor(gantt, from_task, to_task) {\n        this.gantt = gantt;\n        this.from_task = from_task;\n        this.to_task = to_task;\n\n        this.calculate_path();\n        this.draw();\n    }\n\n    calculate_path() {\n        let start_x =\n            this.from_task.$bar.getX() + this.from_task.$bar.getWidth() / 2;\n\n        const condition = () =>\n            this.to_task.$bar.getX() < start_x + this.gantt.options.padding &&\n            start_x > this.from_task.$bar.getX() + this.gantt.options.padding;\n\n        while (condition()) {\n            start_x -= 10;\n        }\n\n        const start_y =\n            this.gantt.options.header_height +\n            this.gantt.options.bar_height +\n            (this.gantt.options.padding + this.gantt.options.bar_height) *\n                this.from_task.task._index +\n            this.gantt.options.padding;\n\n        const end_x = this.to_task.$bar.getX() - this.gantt.options.padding / 2;\n        const end_y =\n            this.gantt.options.header_height +\n            this.gantt.options.bar_height / 2 +\n            (this.gantt.options.padding + this.gantt.options.bar_height) *\n                this.to_task.task._index +\n            this.gantt.options.padding;\n\n        const from_is_below_to =\n            this.from_task.task._index > this.to_task.task._index;\n        const curve = this.gantt.options.arrow_curve;\n        const clockwise = from_is_below_to ? 1 : 0;\n        const curve_y = from_is_below_to ? -curve : curve;\n        const offset = from_is_below_to\n            ? end_y + this.gantt.options.arrow_curve\n            : end_y - this.gantt.options.arrow_curve;\n\n        this.path = `\n            M ${start_x} ${start_y}\n            V ${offset}\n            a ${curve} ${curve} 0 0 ${clockwise} ${curve} ${curve_y}\n            L ${end_x} ${end_y}\n            m -5 -5\n            l 5 5\n            l -5 5`;\n\n        if (\n            this.to_task.$bar.getX() <\n            this.from_task.$bar.getX() + this.gantt.options.padding\n        ) {\n            const down_1 = this.gantt.options.padding / 2 - curve;\n            const down_2 =\n                this.to_task.$bar.getY() +\n                this.to_task.$bar.getHeight() / 2 -\n                curve_y;\n            const left = this.to_task.$bar.getX() - this.gantt.options.padding;\n\n            this.path = `\n                M ${start_x} ${start_y}\n                v ${down_1}\n                a ${curve} ${curve} 0 0 1 -${curve} ${curve}\n                H ${left}\n                a ${curve} ${curve} 0 0 ${clockwise} -${curve} ${curve_y}\n                V ${down_2}\n                a ${curve} ${curve} 0 0 ${clockwise} ${curve} ${curve_y}\n                L ${end_x} ${end_y}\n                m -5 -5\n                l 5 5\n                l -5 5`;\n        }\n    }\n\n    draw() {\n        this.element = createSVG('path', {\n            d: this.path,\n            'data-from': this.from_task.task.id,\n            'data-to': this.to_task.task.id\n        });\n    }\n\n    update() {\n        this.calculate_path();\n        this.element.setAttribute('d', this.path);\n    }\n}\n","export default class Popup {\n    constructor(parent, custom_html) {\n        this.parent = parent;\n        this.custom_html = custom_html;\n        this.make();\n    }\n\n    make() {\n        this.parent.innerHTML = `\n            <div class=\"title\"></div>\n            <div class=\"subtitle\"></div>\n            <div class=\"pointer\"></div>\n        `;\n\n        this.hide();\n\n        this.title = this.parent.querySelector('.title');\n        this.subtitle = this.parent.querySelector('.subtitle');\n        this.pointer = this.parent.querySelector('.pointer');\n    }\n\n    show(options) {\n        if (!options.target_element) {\n            throw new Error('target_element is required to show popup');\n        }\n        if (!options.position) {\n            options.position = 'left';\n        }\n        const target_element = options.target_element;\n\n        if (this.custom_html) {\n            let html = this.custom_html(options.task);\n            html += '<div class=\"pointer\"></div>';\n            this.parent.innerHTML = html;\n            this.pointer = this.parent.querySelector('.pointer');\n        } else {\n            // set data\n            this.title.innerHTML = options.title;\n            this.subtitle.innerHTML = options.subtitle;\n            this.parent.style.width = this.parent.clientWidth + 'px';\n        }\n\n        // set position\n        let position_meta;\n        if (target_element instanceof HTMLElement) {\n            position_meta = target_element.getBoundingClientRect();\n        } else if (target_element instanceof SVGElement) {\n            position_meta = options.target_element.getBBox();\n        }\n\n        if (options.position === 'left') {\n            this.parent.style.left =\n                position_meta.x + (position_meta.width + 10) + 'px';\n            this.parent.style.top = position_meta.y + 'px';\n\n            this.pointer.style.transform = 'rotateZ(90deg)';\n            this.pointer.style.left = '-7px';\n            this.pointer.style.top = '2px';\n        }\n\n        // show\n        this.parent.style.opacity = 1;\n    }\n\n    hide() {\n        this.parent.style.opacity = 0;\n    }\n}\n","import date_utils from './date_utils';\nimport { $, createSVG } from './svg_utils';\nimport Bar from './bar';\nimport Arrow from './arrow';\nimport Popup from './popup';\n\nimport './gantt.scss';\n\nexport default class Gantt {\n    constructor(wrapper, tasks, options) {\n        this.setup_wrapper(wrapper);\n        this.setup_options(options);\n        this.setup_tasks(tasks);\n        // initialize with default view mode\n        this.change_view_mode();\n        this.bind_events();\n    }\n\n    setup_wrapper(element) {\n        let svg_element, wrapper_element;\n\n        // CSS Selector is passed\n        if (typeof element === 'string') {\n            element = document.querySelector(element);\n        }\n\n        // get the SVGElement\n        if (element instanceof HTMLElement) {\n            wrapper_element = element;\n            svg_element = element.querySelector('svg');\n        } else if (element instanceof SVGElement) {\n            svg_element = element;\n        } else {\n            throw new TypeError(\n                'Frappé Gantt only supports usage of a string CSS selector,' +\n                    \" HTML DOM element or SVG DOM element for the 'element' parameter\"\n            );\n        }\n\n        // svg element\n        if (!svg_element) {\n            // create it\n            this.$svg = createSVG('svg', {\n                append_to: wrapper_element,\n                class: 'gantt'\n            });\n        } else {\n            this.$svg = svg_element;\n            this.$svg.classList.add('gantt');\n        }\n\n        // wrapper element\n        this.$container = document.createElement('div');\n        this.$container.classList.add('gantt-container');\n\n        const parent_element = this.$svg.parentElement;\n        parent_element.appendChild(this.$container);\n        this.$container.appendChild(this.$svg);\n\n        // popup wrapper\n        this.popup_wrapper = document.createElement('div');\n        this.popup_wrapper.classList.add('popup-wrapper');\n        this.$container.appendChild(this.popup_wrapper);\n    }\n\n    setup_options(options) {\n        const default_options = {\n            header_height: 50,\n            column_width: 30,\n            step: 24,\n            view_modes: ['Quarter Day', 'Half Day', 'Day', 'Week', 'Month'],\n            bar_height: 20,\n            bar_corner_radius: 3,\n            arrow_curve: 5,\n            padding: 18,\n            view_mode: 'Day',\n            date_format: 'YYYY-MM-DD',\n            popup_trigger: 'click',\n            custom_popup_html: null\n        };\n        this.options = Object.assign({}, default_options, options);\n    }\n\n    setup_tasks(tasks) {\n        // prepare tasks\n        this.tasks = tasks.map((task, i) => {\n            // convert to Date objects\n            task._start = date_utils.parse(task.start);\n            task._end = date_utils.parse(task.end);\n\n            // make task invalid if duration too large\n            if (date_utils.diff(task._end, task._start, 'year') > 10) {\n                task.end = null;\n            }\n\n            // cache index\n            task._index = i;\n\n            // invalid dates\n            if (!task.start && !task.end) {\n                const today = date_utils.today();\n                task._start = today;\n                task._end = date_utils.add(today, 2, 'day');\n            }\n\n            if (!task.start && task.end) {\n                task._start = date_utils.add(task._end, -2, 'day');\n            }\n\n            if (task.start && !task.end) {\n                task._end = date_utils.add(task._start, 2, 'day');\n            }\n\n            // if hours is not set, assume the last day is full day\n            // e.g: 2018-09-09 becomes 2018-09-09 23:59:59\n            const task_end_values = date_utils.get_date_values(task._end);\n            if (task_end_values.slice(3).every(d => d === 0)) {\n                task._end = date_utils.add(task._end, 24, 'hour');\n            }\n\n            // invalid flag\n            if (!task.start || !task.end) {\n                task.invalid = true;\n            }\n\n            // dependencies\n            if (typeof task.dependencies === 'string' || !task.dependencies) {\n                let deps = [];\n                if (task.dependencies) {\n                    deps = task.dependencies\n                        .split(',')\n                        .map(d => d.trim())\n                        .filter(d => d);\n                }\n                task.dependencies = deps;\n            }\n\n            // uids\n            if (!task.id) {\n                task.id = generate_id(task);\n            }\n\n            return task;\n        });\n\n        this.setup_dependencies();\n    }\n\n    setup_dependencies() {\n        this.dependency_map = {};\n        for (let t of this.tasks) {\n            for (let d of t.dependencies) {\n                this.dependency_map[d] = this.dependency_map[d] || [];\n                this.dependency_map[d].push(t.id);\n            }\n        }\n    }\n\n    refresh(tasks) {\n        this.setup_tasks(tasks);\n        this.change_view_mode();\n    }\n\n    change_view_mode(mode = this.options.view_mode) {\n        this.update_view_scale(mode);\n        this.setup_dates();\n        this.render();\n        // fire viewmode_change event\n        this.trigger_event('view_change', [mode]);\n    }\n\n    update_view_scale(view_mode) {\n        this.options.view_mode = view_mode;\n\n        if (view_mode === 'Day') {\n            this.options.step = 24;\n            this.options.column_width = 38;\n        } else if (view_mode === 'Half Day') {\n            this.options.step = 24 / 2;\n            this.options.column_width = 38;\n        } else if (view_mode === 'Quarter Day') {\n            this.options.step = 24 / 4;\n            this.options.column_width = 38;\n        } else if (view_mode === 'Week') {\n            this.options.step = 24 * 7;\n            this.options.column_width = 140;\n        } else if (view_mode === 'Month') {\n            this.options.step = 24 * 30;\n            this.options.column_width = 120;\n        }\n    }\n\n    setup_dates() {\n        this.setup_gantt_dates();\n        this.setup_date_values();\n    }\n\n    setup_gantt_dates() {\n        this.gantt_start = this.gantt_end = null;\n\n        for (let task of this.tasks) {\n            // set global start and end date\n            if (!this.gantt_start || task._start < this.gantt_start) {\n                this.gantt_start = task._start;\n            }\n            if (!this.gantt_end || task._end > this.gantt_end) {\n                this.gantt_end = task._end;\n            }\n        }\n\n        this.gantt_start = date_utils.start_of(this.gantt_start, 'day');\n        this.gantt_end = date_utils.start_of(this.gantt_end, 'day');\n\n        // add date padding on both sides\n        if (this.view_is(['Quarter Day', 'Half Day'])) {\n            this.gantt_start = date_utils.add(this.gantt_start, -7, 'day');\n            this.gantt_end = date_utils.add(this.gantt_end, 7, 'day');\n        } else if (this.view_is('Month')) {\n            this.gantt_start = date_utils.start_of(this.gantt_start, 'year');\n            this.gantt_end = date_utils.add(this.gantt_end, 1, 'year');\n        } else {\n            this.gantt_start = date_utils.add(this.gantt_start, -1, 'month');\n            this.gantt_end = date_utils.add(this.gantt_end, 1, 'month');\n        }\n    }\n\n    setup_date_values() {\n        this.dates = [];\n        let cur_date = null;\n\n        while (cur_date === null || cur_date < this.gantt_end) {\n            if (!cur_date) {\n                cur_date = date_utils.clone(this.gantt_start);\n            } else {\n                cur_date = this.view_is('Month')\n                    ? date_utils.add(cur_date, 1, 'month')\n                    : date_utils.add(cur_date, this.options.step, 'hour');\n            }\n            this.dates.push(cur_date);\n        }\n    }\n\n    bind_events() {\n        this.bind_grid_click();\n        this.bind_bar_events();\n    }\n\n    render() {\n        this.clear();\n        this.setup_layers();\n        this.make_grid();\n        this.make_dates();\n        this.make_bars();\n        this.make_arrows();\n        this.map_arrows_on_bars();\n        this.set_width();\n        this.set_scroll_position();\n    }\n\n    setup_layers() {\n        this.layers = {};\n        const layers = ['grid', 'date', 'arrow', 'progress', 'bar', 'details'];\n        // make group layers\n        for (let layer of layers) {\n            this.layers[layer] = createSVG('g', {\n                class: layer,\n                append_to: this.$svg\n            });\n        }\n    }\n\n    make_grid() {\n        this.make_grid_background();\n        this.make_grid_rows();\n        this.make_grid_header();\n        this.make_grid_ticks();\n        this.make_grid_highlights();\n    }\n\n    make_grid_background() {\n        const grid_width = this.dates.length * this.options.column_width;\n        const grid_height =\n            this.options.header_height +\n            this.options.padding +\n            (this.options.bar_height + this.options.padding) *\n                this.tasks.length;\n\n        createSVG('rect', {\n            x: 0,\n            y: 0,\n            width: grid_width,\n            height: grid_height,\n            class: 'grid-background',\n            append_to: this.layers.grid\n        });\n\n        $.attr(this.$svg, {\n            height: grid_height + this.options.padding + 100,\n            width: '100%'\n        });\n    }\n\n    make_grid_rows() {\n        const rows_layer = createSVG('g', { append_to: this.layers.grid });\n        const lines_layer = createSVG('g', { append_to: this.layers.grid });\n\n        const row_width = this.dates.length * this.options.column_width;\n        const row_height = this.options.bar_height + this.options.padding;\n\n        let row_y = this.options.header_height + this.options.padding / 2;\n\n        for (let task of this.tasks) {\n            createSVG('rect', {\n                x: 0,\n                y: row_y,\n                width: row_width,\n                height: row_height,\n                class: 'grid-row',\n                append_to: rows_layer\n            });\n\n            createSVG('line', {\n                x1: 0,\n                y1: row_y + row_height,\n                x2: row_width,\n                y2: row_y + row_height,\n                class: 'row-line',\n                append_to: lines_layer\n            });\n\n            row_y += this.options.bar_height + this.options.padding;\n        }\n    }\n\n    make_grid_header() {\n        const header_width = this.dates.length * this.options.column_width;\n        const header_height = this.options.header_height + 10;\n        createSVG('rect', {\n            x: 0,\n            y: 0,\n            width: header_width,\n            height: header_height,\n            class: 'grid-header',\n            append_to: this.layers.grid\n        });\n    }\n\n    make_grid_ticks() {\n        let tick_x = 0;\n        let tick_y = this.options.header_height + this.options.padding / 2;\n        let tick_height =\n            (this.options.bar_height + this.options.padding) *\n            this.tasks.length;\n\n        for (let date of this.dates) {\n            let tick_class = 'tick';\n            // thick tick for monday\n            if (this.view_is('Day') && date.getDate() === 1) {\n                tick_class += ' thick';\n            }\n            // thick tick for first week\n            if (\n                this.view_is('Week') &&\n                date.getDate() >= 1 &&\n                date.getDate() < 8\n            ) {\n                tick_class += ' thick';\n            }\n            // thick ticks for quarters\n            if (this.view_is('Month') && (date.getMonth() + 1) % 3 === 0) {\n                tick_class += ' thick';\n            }\n\n            createSVG('path', {\n                d: `M ${tick_x} ${tick_y} v ${tick_height}`,\n                class: tick_class,\n                append_to: this.layers.grid\n            });\n\n            if (this.view_is('Month')) {\n                tick_x +=\n                    date_utils.get_days_in_month(date) *\n                    this.options.column_width /\n                    30;\n            } else {\n                tick_x += this.options.column_width;\n            }\n        }\n    }\n\n    make_grid_highlights() {\n        // highlight today's date\n        if (this.view_is('Day')) {\n            const x =\n                date_utils.diff(date_utils.today(), this.gantt_start, 'hour') /\n                this.options.step *\n                this.options.column_width;\n            const y = 0;\n\n            const width = this.options.column_width;\n            const height =\n                (this.options.bar_height + this.options.padding) *\n                    this.tasks.length +\n                this.options.header_height +\n                this.options.padding / 2;\n\n            createSVG('rect', {\n                x,\n                y,\n                width,\n                height,\n                class: 'today-highlight',\n                append_to: this.layers.grid\n            });\n        }\n    }\n\n    make_dates() {\n        for (let date of this.get_dates_to_draw()) {\n            createSVG('text', {\n                x: date.lower_x,\n                y: date.lower_y,\n                innerHTML: date.lower_text,\n                class: 'lower-text',\n                append_to: this.layers.date\n            });\n\n            if (date.upper_text) {\n                const $upper_text = createSVG('text', {\n                    x: date.upper_x,\n                    y: date.upper_y,\n                    innerHTML: date.upper_text,\n                    class: 'upper-text',\n                    append_to: this.layers.date\n                });\n\n                // remove out-of-bound dates\n                if (\n                    $upper_text.getBBox().x2 > this.layers.grid.getBBox().width\n                ) {\n                    $upper_text.remove();\n                }\n            }\n        }\n    }\n\n    get_dates_to_draw() {\n        let last_date = null;\n        const dates = this.dates.map((date, i) => {\n            const d = this.get_date_info(date, last_date, i);\n            last_date = date;\n            return d;\n        });\n        return dates;\n    }\n\n    get_date_info(date, last_date, i) {\n        if (!last_date) {\n            last_date = date_utils.add(date, 1, 'year');\n        }\n        const date_text = {\n            'Quarter Day_lower': date_utils.format(date, 'HH'),\n            'Half Day_lower': date_utils.format(date, 'HH'),\n            Day_lower:\n                date.getDate() !== last_date.getDate()\n                    ? date_utils.format(date, 'D')\n                    : '',\n            Week_lower:\n                date.getMonth() !== last_date.getMonth()\n                    ? date_utils.format(date, 'D MMM')\n                    : date_utils.format(date, 'D'),\n            Month_lower: date_utils.format(date, 'MMMM'),\n            'Quarter Day_upper':\n                date.getDate() !== last_date.getDate()\n                    ? date_utils.format(date, 'D MMM')\n                    : '',\n            'Half Day_upper':\n                date.getDate() !== last_date.getDate()\n                    ? date.getMonth() !== last_date.getMonth()\n                      ? date_utils.format(date, 'D MMM')\n                      : date_utils.format(date, 'D')\n                    : '',\n            Day_upper:\n                date.getMonth() !== last_date.getMonth()\n                    ? date_utils.format(date, 'MMMM')\n                    : '',\n            Week_upper:\n                date.getMonth() !== last_date.getMonth()\n                    ? date_utils.format(date, 'MMMM')\n                    : '',\n            Month_upper:\n                date.getFullYear() !== last_date.getFullYear()\n                    ? date_utils.format(date, 'YYYY')\n                    : ''\n        };\n\n        const base_pos = {\n            x: i * this.options.column_width,\n            lower_y: this.options.header_height,\n            upper_y: this.options.header_height - 25\n        };\n\n        const x_pos = {\n            'Quarter Day_lower': this.options.column_width * 4 / 2,\n            'Quarter Day_upper': 0,\n            'Half Day_lower': this.options.column_width * 2 / 2,\n            'Half Day_upper': 0,\n            Day_lower: this.options.column_width / 2,\n            Day_upper: this.options.column_width * 30 / 2,\n            Week_lower: 0,\n            Week_upper: this.options.column_width * 4 / 2,\n            Month_lower: this.options.column_width / 2,\n            Month_upper: this.options.column_width * 12 / 2\n        };\n\n        return {\n            upper_text: date_text[`${this.options.view_mode}_upper`],\n            lower_text: date_text[`${this.options.view_mode}_lower`],\n            upper_x: base_pos.x + x_pos[`${this.options.view_mode}_upper`],\n            upper_y: base_pos.upper_y,\n            lower_x: base_pos.x + x_pos[`${this.options.view_mode}_lower`],\n            lower_y: base_pos.lower_y\n        };\n    }\n\n    make_bars() {\n        this.bars = this.tasks.map(task => {\n            const bar = new Bar(this, task);\n            this.layers.bar.appendChild(bar.group);\n            return bar;\n        });\n    }\n\n    make_arrows() {\n        this.arrows = [];\n        for (let task of this.tasks) {\n            let arrows = [];\n            arrows = task.dependencies\n                .map(task_id => {\n                    const dependency = this.get_task(task_id);\n                    if (!dependency) return;\n                    const arrow = new Arrow(\n                        this,\n                        this.bars[dependency._index], // from_task\n                        this.bars[task._index] // to_task\n                    );\n                    this.layers.arrow.appendChild(arrow.element);\n                    return arrow;\n                })\n                .filter(Boolean); // filter falsy values\n            this.arrows = this.arrows.concat(arrows);\n        }\n    }\n\n    map_arrows_on_bars() {\n        for (let bar of this.bars) {\n            bar.arrows = this.arrows.filter(arrow => {\n                return (\n                    arrow.from_task.task.id === bar.task.id ||\n                    arrow.to_task.task.id === bar.task.id\n                );\n            });\n        }\n    }\n\n    set_width() {\n        const cur_width = this.$svg.getBoundingClientRect().width;\n        const actual_width = this.$svg\n            .querySelector('.grid .grid-row')\n            .getAttribute('width');\n        if (cur_width < actual_width) {\n            this.$svg.setAttribute('width', actual_width);\n        }\n    }\n\n    set_scroll_position() {\n        const parent_element = this.$svg.parentElement;\n        if (!parent_element) return;\n\n        const hours_before_first_task = date_utils.diff(\n            this.get_oldest_starting_date(),\n            this.gantt_start,\n            'hour'\n        );\n\n        const scroll_pos =\n            hours_before_first_task /\n                this.options.step *\n                this.options.column_width -\n            this.options.column_width;\n\n        parent_element.scrollLeft = scroll_pos;\n    }\n\n    bind_grid_click() {\n        $.on(\n            this.$svg,\n            this.options.popup_trigger,\n            '.grid-row, .grid-header',\n            () => {\n                this.unselect_all();\n                this.hide_popup();\n            }\n        );\n    }\n\n    bind_bar_events() {\n        let is_dragging = false;\n        let x_on_start = 0;\n        let y_on_start = 0;\n        let is_resizing_left = false;\n        let is_resizing_right = false;\n        let parent_bar_id = null;\n        let bars = []; // instanceof Bar\n        this.bar_being_dragged = null;\n\n        function action_in_progress() {\n            return is_dragging || is_resizing_left || is_resizing_right;\n        }\n\n        $.on(this.$svg, 'mousedown', '.bar-wrapper, .handle', (e, element) => {\n            const bar_wrapper = $.closest('.bar-wrapper', element);\n\n            if (element.classList.contains('left')) {\n                is_resizing_left = true;\n            } else if (element.classList.contains('right')) {\n                is_resizing_right = true;\n            } else if (element.classList.contains('bar-wrapper')) {\n                is_dragging = true;\n            }\n\n            bar_wrapper.classList.add('active');\n\n            x_on_start = e.offsetX;\n            y_on_start = e.offsetY;\n\n            parent_bar_id = bar_wrapper.getAttribute('data-id');\n            const ids = [\n                parent_bar_id,\n                ...this.get_all_dependent_tasks(parent_bar_id)\n            ];\n            bars = ids.map(id => this.get_bar(id));\n\n            this.bar_being_dragged = parent_bar_id;\n\n            bars.forEach(bar => {\n                const $bar = bar.$bar;\n                $bar.ox = $bar.getX();\n                $bar.oy = $bar.getY();\n                $bar.owidth = $bar.getWidth();\n                $bar.finaldx = 0;\n            });\n        });\n\n        $.on(this.$svg, 'mousemove', e => {\n            if (!action_in_progress()) return;\n            const dx = e.offsetX - x_on_start;\n            const dy = e.offsetY - y_on_start;\n\n            bars.forEach(bar => {\n                const $bar = bar.$bar;\n                $bar.finaldx = this.get_snap_position(dx);\n\n                if (is_resizing_left) {\n                    if (parent_bar_id === bar.task.id) {\n                        bar.update_bar_position({\n                            x: $bar.ox + $bar.finaldx,\n                            width: $bar.owidth - $bar.finaldx\n                        });\n                    } else {\n                        bar.update_bar_position({\n                            x: $bar.ox + $bar.finaldx\n                        });\n                    }\n                } else if (is_resizing_right) {\n                    if (parent_bar_id === bar.task.id) {\n                        bar.update_bar_position({\n                            width: $bar.owidth + $bar.finaldx\n                        });\n                    }\n                } else if (is_dragging) {\n                    bar.update_bar_position({ x: $bar.ox + $bar.finaldx });\n                }\n            });\n        });\n\n        document.addEventListener('mouseup', e => {\n            if (is_dragging || is_resizing_left || is_resizing_right) {\n                bars.forEach(bar => bar.group.classList.remove('active'));\n            }\n\n            is_dragging = false;\n            is_resizing_left = false;\n            is_resizing_right = false;\n        });\n\n        $.on(this.$svg, 'mouseup', e => {\n            this.bar_being_dragged = null;\n            bars.forEach(bar => {\n                const $bar = bar.$bar;\n                if (!$bar.finaldx) return;\n                bar.date_changed();\n                bar.set_action_completed();\n            });\n        });\n\n        this.bind_bar_progress();\n    }\n\n    bind_bar_progress() {\n        let x_on_start = 0;\n        let y_on_start = 0;\n        let is_resizing = null;\n        let bar = null;\n        let $bar_progress = null;\n        let $bar = null;\n\n        $.on(this.$svg, 'mousedown', '.handle.progress', (e, handle) => {\n            is_resizing = true;\n            x_on_start = e.offsetX;\n            y_on_start = e.offsetY;\n\n            const $bar_wrapper = $.closest('.bar-wrapper', handle);\n            const id = $bar_wrapper.getAttribute('data-id');\n            bar = this.get_bar(id);\n\n            $bar_progress = bar.$bar_progress;\n            $bar = bar.$bar;\n\n            $bar_progress.finaldx = 0;\n            $bar_progress.owidth = $bar_progress.getWidth();\n            $bar_progress.min_dx = -$bar_progress.getWidth();\n            $bar_progress.max_dx = $bar.getWidth() - $bar_progress.getWidth();\n        });\n\n        $.on(this.$svg, 'mousemove', e => {\n            if (!is_resizing) return;\n            let dx = e.offsetX - x_on_start;\n            let dy = e.offsetY - y_on_start;\n\n            if (dx > $bar_progress.max_dx) {\n                dx = $bar_progress.max_dx;\n            }\n            if (dx < $bar_progress.min_dx) {\n                dx = $bar_progress.min_dx;\n            }\n\n            const $handle = bar.$handle_progress;\n            $.attr($bar_progress, 'width', $bar_progress.owidth + dx);\n            $.attr($handle, 'points', bar.get_progress_polygon_points());\n            $bar_progress.finaldx = dx;\n        });\n\n        $.on(this.$svg, 'mouseup', () => {\n            is_resizing = false;\n            if (!($bar_progress && $bar_progress.finaldx)) return;\n            bar.progress_changed();\n            bar.set_action_completed();\n        });\n    }\n\n    get_all_dependent_tasks(task_id) {\n        let out = [];\n        let to_process = [task_id];\n        while (to_process.length) {\n            const deps = to_process.reduce((acc, curr) => {\n                acc = acc.concat(this.dependency_map[curr]);\n                return acc;\n            }, []);\n\n            out = out.concat(deps);\n            to_process = deps.filter(d => !to_process.includes(d));\n        }\n\n        return out.filter(Boolean);\n    }\n\n    get_snap_position(dx) {\n        let odx = dx,\n            rem,\n            position;\n\n        if (this.view_is('Week')) {\n            rem = dx % (this.options.column_width / 7);\n            position =\n                odx -\n                rem +\n                (rem < this.options.column_width / 14\n                    ? 0\n                    : this.options.column_width / 7);\n        } else if (this.view_is('Month')) {\n            rem = dx % (this.options.column_width / 30);\n            position =\n                odx -\n                rem +\n                (rem < this.options.column_width / 60\n                    ? 0\n                    : this.options.column_width / 30);\n        } else {\n            rem = dx % this.options.column_width;\n            position =\n                odx -\n                rem +\n                (rem < this.options.column_width / 2\n                    ? 0\n                    : this.options.column_width);\n        }\n        return position;\n    }\n\n    unselect_all() {\n        [...this.$svg.querySelectorAll('.bar-wrapper')].forEach(el => {\n            el.classList.remove('active');\n        });\n    }\n\n    view_is(modes) {\n        if (typeof modes === 'string') {\n            return this.options.view_mode === modes;\n        }\n\n        if (Array.isArray(modes)) {\n            return modes.some(mode => this.options.view_mode === mode);\n        }\n\n        return false;\n    }\n\n    get_task(id) {\n        return this.tasks.find(task => {\n            return task.id === id;\n        });\n    }\n\n    get_bar(id) {\n        return this.bars.find(bar => {\n            return bar.task.id === id;\n        });\n    }\n\n    show_popup(options) {\n        if (!this.popup) {\n            this.popup = new Popup(\n                this.popup_wrapper,\n                this.options.custom_popup_html\n            );\n        }\n        this.popup.show(options);\n    }\n\n    hide_popup() {\n        this.popup && this.popup.hide();\n    }\n\n    trigger_event(event, args) {\n        if (this.options['on_' + event]) {\n            this.options['on_' + event].apply(null, args);\n        }\n    }\n\n    /**\n     * Gets the oldest starting date from the list of tasks\n     *\n     * @returns Date\n     * @memberof Gantt\n     */\n    get_oldest_starting_date() {\n        return this.tasks\n            .map(task => task._start)\n            .reduce(\n                (prev_date, cur_date) =>\n                    cur_date <= prev_date ? cur_date : prev_date\n            );\n    }\n\n    /**\n     * Clear all elements from the parent svg element\n     *\n     * @memberof Gantt\n     */\n    clear() {\n        this.$svg.innerHTML = '';\n    }\n}\n\nfunction generate_id(task) {\n    return (\n        task.name +\n        '_' +\n        Math.random()\n            .toString(36)\n            .slice(2, 12)\n    );\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    flexWrap: 'wrap'\n  },\n\n  /* Styles applied to the root element if `row={true}`. */\n  row: {\n    flexDirection: 'row'\n  }\n};\n/**\n * `FormGroup` wraps controls such as `Checkbox` and `Switch`.\n * It provides compact row layout.\n * For the `Radio`, you should be using the `RadioGroup` component instead of this one.\n */\n\nvar FormGroup = React.forwardRef(function FormGroup(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$row = props.row,\n      row = _props$row === void 0 ? false : _props$row,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"row\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, row && classes.row),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? FormGroup.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * Display group of elements in a compact row.\n   */\n  row: PropTypes.bool\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiFormGroup'\n})(FormGroup);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { refType } from '@material-ui/utils';\nimport { useFormControl } from '../FormControl';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nimport capitalize from '../utils/capitalize';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      display: 'inline-flex',\n      alignItems: 'center',\n      cursor: 'pointer',\n      // For correct alignment with the text.\n      verticalAlign: 'middle',\n      WebkitTapHighlightColor: 'transparent',\n      marginLeft: -11,\n      marginRight: 16,\n      // used for row presentation of radio/checkbox\n      '&$disabled': {\n        cursor: 'default'\n      }\n    },\n\n    /* Styles applied to the root element if `labelPlacement=\"start\"`. */\n    labelPlacementStart: {\n      flexDirection: 'row-reverse',\n      marginLeft: 16,\n      // used for row presentation of radio/checkbox\n      marginRight: -11\n    },\n\n    /* Styles applied to the root element if `labelPlacement=\"top\"`. */\n    labelPlacementTop: {\n      flexDirection: 'column-reverse',\n      marginLeft: 16\n    },\n\n    /* Styles applied to the root element if `labelPlacement=\"bottom\"`. */\n    labelPlacementBottom: {\n      flexDirection: 'column',\n      marginLeft: 16\n    },\n\n    /* Pseudo-class applied to the root element if `disabled={true}`. */\n    disabled: {},\n\n    /* Styles applied to the label's Typography component. */\n    label: {\n      '&$disabled': {\n        color: theme.palette.text.disabled\n      }\n    }\n  };\n};\n/**\n * Drop in replacement of the `Radio`, `Switch` and `Checkbox` component.\n * Use this component if you want to display an extra label.\n */\n\nvar FormControlLabel = React.forwardRef(function FormControlLabel(props, ref) {\n  var checked = props.checked,\n      classes = props.classes,\n      className = props.className,\n      control = props.control,\n      disabledProp = props.disabled,\n      inputRef = props.inputRef,\n      label = props.label,\n      _props$labelPlacement = props.labelPlacement,\n      labelPlacement = _props$labelPlacement === void 0 ? 'end' : _props$labelPlacement,\n      name = props.name,\n      onChange = props.onChange,\n      value = props.value,\n      other = _objectWithoutProperties(props, [\"checked\", \"classes\", \"className\", \"control\", \"disabled\", \"inputRef\", \"label\", \"labelPlacement\", \"name\", \"onChange\", \"value\"]);\n\n  var muiFormControl = useFormControl();\n  var disabled = disabledProp;\n\n  if (typeof disabled === 'undefined' && typeof control.props.disabled !== 'undefined') {\n    disabled = control.props.disabled;\n  }\n\n  if (typeof disabled === 'undefined' && muiFormControl) {\n    disabled = muiFormControl.disabled;\n  }\n\n  var controlProps = {\n    disabled: disabled\n  };\n  ['checked', 'name', 'onChange', 'value', 'inputRef'].forEach(function (key) {\n    if (typeof control.props[key] === 'undefined' && typeof props[key] !== 'undefined') {\n      controlProps[key] = props[key];\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"label\", _extends({\n    className: clsx(classes.root, className, labelPlacement !== 'end' && classes[\"labelPlacement\".concat(capitalize(labelPlacement))], disabled && classes.disabled),\n    ref: ref\n  }, other), React.cloneElement(control, controlProps), /*#__PURE__*/React.createElement(Typography, {\n    component: \"span\",\n    className: clsx(classes.label, disabled && classes.disabled)\n  }, label));\n});\nprocess.env.NODE_ENV !== \"production\" ? FormControlLabel.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * If `true`, the component appears selected.\n   */\n  checked: PropTypes.bool,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * A control element. For instance, it can be be a `Radio`, a `Switch` or a `Checkbox`.\n   */\n  control: PropTypes.element.isRequired,\n\n  /**\n   * If `true`, the control will be disabled.\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * Pass a ref to the `input` element.\n   */\n  inputRef: refType,\n\n  /**\n   * The text to be used in an enclosing label element.\n   */\n  label: PropTypes.node,\n\n  /**\n   * The position of the label.\n   */\n  labelPlacement: PropTypes.oneOf(['bottom', 'end', 'start', 'top']),\n\n  /**\n   * @ignore\n   */\n  name: PropTypes.string,\n\n  /**\n   * Callback fired when the state is changed.\n   *\n   * @param {object} event The event source of the callback.\n   * You can pull out the new checked state by accessing `event.target.checked` (boolean).\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * The value of the component.\n   */\n  value: PropTypes.any\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiFormControlLabel'\n})(FormControlLabel);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _frappeGantt = require('frappe-gantt');\n\nvar _frappeGantt2 = _interopRequireDefault(_frappeGantt);\n\nvar _sizeSensor = require('size-sensor');\n\nvar _helper = require('./helper');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ReactGantt = function (_Component) {\n  _inherits(ReactGantt, _Component);\n\n  function ReactGantt() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, ReactGantt);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = ReactGantt.__proto__ || Object.getPrototypeOf(ReactGantt)).call.apply(_ref, [this].concat(args))), _this), _this.ganttRef = undefined, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(ReactGantt, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.renderFrappeGanttDOM();\n    }\n  }, {\n    key: 'componentDidUpdate',\n\n\n    // redraw the gantt when update. now change the viewMode\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.ganttInst) {\n        this.ganttInst.refresh(this.props.tasks);\n        // 不相等才刷新\n        if (this.props.viewMode !== prevProps.viewMode) {\n          this.ganttInst.change_view_mode(this.props.viewMode);\n        }\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      (0, _sizeSensor.clear)(this.ganttRef);\n    }\n\n    /**\n     * render the gantt chart\n     * @returns {GanttJS}\n     */\n\n  }, {\n    key: 'renderFrappeGanttDOM',\n    value: function renderFrappeGanttDOM() {\n      var _this2 = this;\n\n      // init the Gantt\n      // if exist, return\n      if (this.ganttInst) return this.ganttInst;\n\n      var _props = this.props,\n          onClick = _props.onClick,\n          onDateChange = _props.onDateChange,\n          onProgressChange = _props.onProgressChange,\n          onViewChange = _props.onViewChange,\n          customPopupHtml = _props.customPopupHtml,\n          tasks = _props.tasks,\n          viewMode = _props.viewMode;\n\n      // when resize\n\n      (0, _sizeSensor.bind)(this.ganttRef, function () {\n        if (_this2.ganttInst) {\n          _this2.ganttInst.refresh(_this2.props.tasks);\n        }\n      });\n\n      // new instance\n      this.ganttInst = new _frappeGantt2.default(this.ganttRef, tasks, {\n        on_click: onClick || _helper.noop,\n        on_date_change: onDateChange || _helper.noop,\n        on_progress_change: onProgressChange || _helper.noop,\n        on_view_change: onViewChange || _helper.noop,\n        custom_popup_html: customPopupHtml || null\n      });\n      // change view mode\n      this.ganttInst.change_view_mode(viewMode);\n      return this.ganttInst;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      return _react2.default.createElement('svg', { ref: function ref(node) {\n          _this3.ganttRef = node;\n        } });\n    }\n  }]);\n\n  return ReactGantt;\n}(_react.Component);\n\nexports.default = ReactGantt;\n;\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\n/**\n * Created by hustcc on 18/6/9.\n * Contract: i@hust.cc\n */\nvar _default = function _default(fn) {\n  var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 60;\n  var timer = null;\n  return function () {\n    var _this = this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    clearTimeout(timer);\n    timer = setTimeout(function () {\n      fn.apply(_this, args);\n    }, delay);\n  };\n};\n\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SensorTabIndex = exports.SensorClassName = exports.SensorStyle = exports.SizeSensorId = void 0;\n\n/**\n * Created by hustcc on 18/6/9.\n * Contract: i@hust.cc\n */\nvar SizeSensorId = 'size-sensor-id';\nexports.SizeSensorId = SizeSensorId;\nvar SensorStyle = 'display:block;position:absolute;top:0;left:0;height:100%;width:auto;overflow:hidden;pointer-events:none;z-index:-1;opacity:0';\nexports.SensorStyle = SensorStyle;\nvar SensorClassName = 'size-sensor-object';\nexports.SensorClassName = SensorClassName;\nvar SensorTabIndex = '-1';\nexports.SensorTabIndex = SensorTabIndex;"],"sourceRoot":""}